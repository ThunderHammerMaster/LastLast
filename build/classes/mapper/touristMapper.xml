<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mzk.dao.TouristDao">
	<insert id="addTourist" parameterType="Tourist">
		insert into tourist (t_name,t_password,t_type)values(#{tName},#{tPassword},2)
	</insert>
	
	<select id="queryTorByName" parameterType="String" resultType="Tourist">
		select *from tourist where t_name=#{tName}
	</select>
	
	<select id="loginQuery" parameterType="Tourist" resultType="Tourist">
		select *from tourist where t_name=#{tName} and t_password=#{tPassword}
	</select>
	
	<update id="updatePassword" parameterType="Tourist">
		update tourist set t_password=#{tPassword} where t_name=#{tName}
	</update>
	
	<select id="queryAllDepart" resultMap="queryAllDepart">
		select *from department d,job j where d.depart_id=j.job_depart_id
	</select>
	
	<resultMap type="Department" id="queryAllDepart">
		<id column="depart_id" property="departId"/>
		<result column="depart_name" property="departName"/>
		<collection property="job" ofType="Job">
			<id column="job_id" property="jobId"/>
			<result column="job_name" property="jobName"/>
		</collection>
	</resultMap>
	
	<select id="queryTorById" parameterType="int" resultType="Tourist">
		select *from tourist where t_id=#{tId}
	</select>
	
	<update id="updateTorResume" parameterType="Tourist">
		update tourist set t_resume_id=#{tResumeId} where t_id=#{tId}
	</update>
</mapper>